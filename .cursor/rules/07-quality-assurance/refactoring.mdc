---
description: Apply safe refactoring practices using TDD/BDD methodology for all code improvements
globs: volley-app-backend/**/*.ts, volley-app-frontend/**/*.{ts,tsx}
alwaysApply: false
---

Title: Refactoring Best Practices

Scope: Backend and Frontend code improvements without behavior change.

Principles:
- Follow TDD cycle: RED → GREEN → REFACTOR; keep tests green at each step.
- Small, incremental edits; limit function length (≤30 lines) and responsibilities (one per file).
- Prefer extraction (functions, components, value objects) and early returns; eliminate duplication (DRY).

Do:
- Strengthen types; remove any/unknown; clarify names; reduce nesting.
- Extract UI subcomponents and hooks; extract domain value objects/services.
- Run tests/lint/build after each meaningful step; keep commits focused.

Avoid:
- Mixing refactor with new features; large sweeping edits; changing behavior.

Checklists:
- Before: tests green; understand behavior; identify smells.
- During: tiny steps; validate frequently; revert fast on failures.
- After: tests green; coverage same or higher; complexity reduced; duplication removed.

